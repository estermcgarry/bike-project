<script>

var markers = {{ markers|safe }};

var map;
function initMap() {
    var dublinCords = {lat: 53.3476222, lng: -6.2606207};
    var mapOptions = {center: dublinCords, zoom: 14};
    
    // New map
    map = new google.maps.Map(document.getElementById('map'), mapOptions);

    // Loop through markers
    for (var i = 0; i < markers.length; i++) {
        // Add marker
        addMarker(markers[i]);
    };
    
    //Add Marker Function
    function addMarker(newMarker) {
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(newMarker.latitude, newMarker.longitude),
            map: map,
            title: newMarker.name
        });
        
        // Add info window
        var infoWindow = new google.maps.InfoWindow({
            content: newMarker.name
        });
        marker.addListener('click', function(){
            infoWindow.open(map, marker);
        });
    };
};

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBR7esRJtzTOqcv53Bk3t1xpiCF0YPO-3I&callback=initMap"
        async defer></script>



